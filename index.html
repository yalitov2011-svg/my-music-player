<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouSync PRO</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --primary: #1DB954;
            --dark: #121212;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        body { 
            background-color: var(--dark);
            color: white; 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; padding: 0;
            overflow: hidden; /* ×”××¤×œ×™×§×¦×™×” ×ª×•×¤×¡×ª ××¡×š ××œ× */
            height: 100vh;
        }

        /* --- ××¡×š ×›× ×™×¡×” ××§×¦×•×¢×™ --- */
        #loginScreen {
            height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: radial-gradient(circle at center, #1e1e1e, #000);
            z-index: 1000; position: relative;
        }
        .login-card {
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(20px);
            padding: 50px; border-radius: 20px; width: 350px; text-align: center;
            border: 1px solid var(--border);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        input.auth-input {
            width: 100%; padding: 15px; margin: 10px 0; border-radius: 10px; border: 1px solid #333; 
            background: rgba(0,0,0,0.3); color: white; outline: none; text-align: center; font-size: 16px;
        }
        input.auth-input:focus { border-color: var(--primary); }
        
        .btn-grad {
            background: linear-gradient(45deg, #1DB954, #1ed760);
            border: none; color: black; font-weight: bold; padding: 15px; width: 100%; border-radius: 10px;
            cursor: pointer; font-size: 16px; margin-top: 10px; transition: 0.3s;
        }
        .btn-grad:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(29, 185, 84, 0.4); }

        /* --- ×œ×™×™×××•×˜ ×”××¤×œ×™×§×¦×™×” --- */
        #appScreen {
            display: none;
            grid-template-columns: 250px 1fr 300px; /* ×ª×¤×¨×™×˜, ×ª×•×›×Ÿ, ×¦'××˜ */
            grid-template-rows: 1fr 90px; /* ×ª×•×›×Ÿ, × ×’×Ÿ ×œ××˜×” */
            height: 100vh;
        }

        /* ×¦×“ ×™××™×Ÿ - ××©×ª××©×™× ×•× ×™×”×•×œ */
        .sidebar {
            background: #000; border-left: 1px solid var(--border);
            display: flex; flex-direction: column; padding: 20px;
        }
        .user-list { flex: 1; overflow-y: auto; margin-top: 20px; }
        .user-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px; background: var(--glass); margin-bottom: 5px; border-radius: 8px; font-size: 14px;
        }
        .kick-btn { color: #ff4444; cursor: pointer; padding: 5px; opacity: 0.7; }
        .kick-btn:hover { opacity: 1; transform: scale(1.1); }

        /* ××¨×›×– - ×ª×•×›×Ÿ ×•× ×’×Ÿ */
        .main-content {
            background: linear-gradient(to bottom, #1a1a1a, #121212);
            overflow-y: auto; padding: 30px; position: relative;
        }
        
        /* × ×’×Ÿ ×•×™×“××• ××•×¡×ª×¨ ×œ××—×¦×” */
        .video-container {
            width: 100%; max-width: 700px; margin: 0 auto; aspect-ratio: 16/9;
            border-radius: 15px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            background: black; margin-bottom: 30px;
        }
        iframe { width: 100%; height: 100%; border: none; }

        /* ×¦×“ ×©×××œ - ×¦'××˜ */
        .chat-panel {
            background: #000; border-right: 1px solid var(--border);
            display: flex; flex-direction: column;
        }
        .chat-messages { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .msg { background: var(--glass); padding: 8px 12px; border-radius: 10px; font-size: 13px; max-width: 85%; }
        .msg strong { color: var(--primary); display: block; font-size: 11px; margin-bottom: 2px; }
        .chat-input-box { padding: 15px; border-top: 1px solid var(--border); display: flex; gap: 5px; }
        
        /* --- ×”× ×’×Ÿ ×œ××˜×” (Bottom Bar) --- */
        .bottom-player {
            grid-column: 1 / 4;
            background: #181818;
            border-top: 1px solid #333;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; z-index: 100;
        }
        
        /* ××™×“×¢ ×©×™×¨ */
        .now-playing { display: flex; align-items: center; gap: 15px; width: 30%; }
        .np-thumb { width: 56px; height: 56px; border-radius: 4px; background: #333; object-fit: cover; }
        .np-text div { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
        .np-title { font-weight: bold; font-size: 14px; }
        .np-artist { font-size: 12px; color: #aaa; }

        /* ×‘×§×¨×™× ×•×¤×¨×•×’×¨×¡ ×‘×¨ */
        .player-center { display: flex; flex-direction: column; align-items: center; width: 40%; }
        .controls { display: flex; gap: 20px; margin-bottom: 5px; }
        .ctrl-btn { background: none; border: none; color: #b3b3b3; font-size: 18px; cursor: pointer; }
        .ctrl-btn:hover { color: white; }
        .ctrl-btn.play { background: white; color: black; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; font-size: 14px; }

        .progress-container { width: 100%; display: flex; align-items: center; gap: 10px; font-size: 11px; color: #aaa; }
        .progress-bar-bg { flex: 1; height: 4px; background: #555; border-radius: 2px; position: relative; cursor: pointer; }
        .progress-bar-fill { height: 100%; background: var(--primary); width: 0%; border-radius: 2px; }
        
        /* ×›×¤×ª×•×¨×™ ×¦×“ (×”×¦×‘×¢×”, ××™×œ×™×) */
        .player-right { width: 30%; display: flex; justify-content: flex-end; gap: 10px; }
        .tool-btn { background: transparent; border: 1px solid #555; color: white; padding: 5px 15px; border-radius: 20px; font-size: 12px; cursor: pointer; transition: 0.2s; }
        .tool-btn:hover { border-color: var(--primary); color: var(--primary); }
        .skip-active { background: rgba(255, 0, 0, 0.2); border-color: red; }

        /* ×—×™×¤×•×© */
        .search-overlay { margin-bottom: 20px; position: relative; }
        .search-input { width: 100%; padding: 12px 40px 12px 15px; background: white; border: none; border-radius: 30px; color: black; font-weight: bold; outline: none; }
        .search-icon { position: absolute; right: 15px; top: 12px; color: black; }

        /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª ×œ×˜×œ×¤×•×Ÿ */
        @media (max-width: 768px) {
            #appScreen { grid-template-columns: 1fr; grid-template-rows: 1fr 1fr 90px; }
            .sidebar { display: none; } /* × ×¡×ª×™×¨ ××©×ª××©×™× ×‘×˜×œ×¤×•×Ÿ ×›×“×™ ×œ×—×¡×•×š ××§×•× */
            .chat-panel { grid-row: 2; border-top: 1px solid #333; }
        }

    </style>
</head>
<body>

    <div id="loginScreen">
        <h1 style="font-size: 40px; margin-bottom:10px;">You<span style="color:var(--primary)">Sync</span> PRO</h1>
        <div class="login-card">
            <input type="text" id="usernameInput" class="auth-input" placeholder="×©× ××©×ª××©">
            <button class="btn-grad" onclick="createRoom()">ğŸ‘‘ ×¦×•×¨ ×—×“×¨</button>
            <p style="margin: 10px 0; font-size: 12px; color: #aaa;">××•</p>
            <input type="number" id="roomInput" class="auth-input" placeholder="×§×•×“ ×—×“×¨">
            <button class="btn-grad" style="background: #333; color: white;" onclick="joinRoom()">ğŸš€ ×”×¦×˜×¨×£</button>
        </div>
    </div>

    <div id="appScreen">
        
        <div class="sidebar">
            <h3 style="color:var(--primary); margin:0;">×—×“×¨: <span id="roomCodeDisplay"></span></h3>
            <div style="font-size: 12px; color: #aaa; margin-bottom: 20px;">×× ×”×œ: <span id="adminName">...</span></div>
            
            <div style="font-weight:bold; margin-bottom:10px;">××—×•×‘×¨×™× (<span id="userCount">0</span>)</div>
            <div id="usersList" class="user-list">
                </div>
        </div>

        <div class="main-content">
            <div class="search-overlay">
                <input type="text" id="searchInput" class="search-input" placeholder="×—×¤×© ×©×™×¨, ×–××¨ ××• ××œ×‘×•×...">
                <i class="fas fa-search search-icon"></i>
            </div>

            <div class="video-container">
                <div id="player"></div>
            </div>

            <h3 style="border-bottom: 1px solid #333; padding-bottom: 10px;">ğŸ”¥ ×ª×•×¦××•×ª / ×œ×”×™×˜×™×</h3>
            <div id="resultsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;"></div>
        </div>

        <div class="chat-panel">
            <div style="padding: 15px; font-weight: bold; border-bottom: 1px solid #333;">ğŸ’¬ ×¦'××˜ ×—×™</div>
            <div id="chatMessages" class="chat-messages"></div>
            <div class="chat-input-box">
                <input type="text" id="chatInput" style="flex:1; background:transparent; border:none; color:white; outline:none;" placeholder="×”×§×œ×“ ×”×•×“×¢×”...">
                <button onclick="sendMessage()" style="background:none; border:none; color:var(--primary); cursor:pointer;"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

        <div class="bottom-player">
            <div class="now-playing">
                <img id="npThumb" src="https://via.placeholder.com/56" class="np-thumb">
                <div class="np-text">
                    <div id="npTitle" class="np-title">×œ× ×× ×’×Ÿ</div>
                    <div id="npStatus" class="np-artist">×××ª×™×Ÿ...</div>
                </div>
            </div>

            <div class="player-center">
                <div class="controls">
                    <button class="ctrl-btn" onclick="sendReaction('ğŸ”¥')">ğŸ”¥</button>
                    <button class="ctrl-btn play" id="playPauseBtn"><i class="fas fa-pause"></i></button>
                    <button class="ctrl-btn" onclick="sendReaction('â¤ï¸')">â¤ï¸</button>
                </div>
                <div class="progress-container">
                    <span id="currentTime">0:00</span>
                    <div class="progress-bar-bg">
                        <div id="progressBar" class="progress-bar-fill"></div>
                    </div>
                    <span id="durationTime">0:00</span>
                </div>
            </div>

            <div class="player-right">
                <button id="voteSkipBtn" class="tool-btn" onclick="voteSkip()"><i class="fas fa-forward"></i> ×“×œ×’ (0/0)</button>
                <button class="tool-btn" onclick="downloadCurrent()"><i class="fas fa-download"></i></button>
            </div>
        </div>

    </div>

    <script>
        // --- ×”×’×“×¨×•×ª ---
        const RAPID_API_KEY = 'efb1ed4f48msh5dfd6650699ded0p1f5775jsn2c2c0eb8bbb3';
        const RAPID_API_HOST = 'youtube-mp36.p.rapidapi.com'; 
        const YOUTUBE_API_KEY = 'AIzaSyAuLutPPSJlZJKkfBrzRNURSibcqkeeA60';

        const firebaseConfig = {
            apiKey: "AIzaSyDKN3qgnvUP4SZX9aOAaThnDI4vUjjVw9A",
            authDomain: "musicsync-58d86.firebaseapp.com",
            projectId: "musicsync-58d86",
            databaseURL: "https://musicsync-58d86-default-rtdb.firebaseio.com"
        };
        try { firebase.initializeApp(firebaseConfig); } catch(e){}
        const db = firebase.database();

        let player, isSyncing = false, currentRoom = null, myName = "", myKey = "";
        let isAdmin = false; // ×”×× ×× ×™ ×”×× ×”×œ?
        let currentVideoId = "";
        let totalUsers = 1;

        // --- ×›× ×™×¡×” ---
        function createRoom() {
            myName = document.getElementById('usernameInput').value || "Admin";
            isAdmin = true;
            enterRoom(Math.floor(1000 + Math.random() * 9000));
        }
        function joinRoom() {
            myName = document.getElementById('usernameInput').value || "Guest";
            const code = document.getElementById('roomInput').value;
            if(code) enterRoom(code);
        }

        function enterRoom(code) {
            currentRoom = code;
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appScreen').style.display = 'grid';
            document.getElementById('roomCodeDisplay').innerText = code;

            loadYoutubePlayer();
            loadResults("×œ×”×™×˜×™× ×™×©×¨××œ 2025");

            // ×”×’×“×¨×ª ×× ×”×œ
            if (isAdmin) {
                db.ref(`rooms/${code}/admin`).set(myName);
            }
            db.ref(`rooms/${code}/admin`).on('value', snap => {
                document.getElementById('adminName').innerText = snap.val() || "××™×Ÿ";
            });

            // ×›× ×™×¡×ª ××©×ª××©
            const userRef = db.ref(`rooms/${code}/users`).push();
            myKey = userRef.key;
            userRef.set({ name: myName });
            userRef.onDisconnect().remove();

            // ×”××–× ×” ×œ××©×ª××©×™× (×œ×¦×•×¨×š ×¡×¤×™×¨×” ×•×‘×¢×™×˜×”)
            db.ref(`rooms/${code}/users`).on('value', snap => {
                const list = document.getElementById('usersList');
                list.innerHTML = "";
                totalUsers = snap.numChildren();
                document.getElementById('userCount').innerText = totalUsers;
                updateVoteBtnText(0); // ××™×¤×•×¡ ×ª×¦×•×’×ª ×”×¦×‘×¢×•×ª

                snap.forEach(child => {
                    const u = child.val();
                    const k = child.key;
                    // ×›×¤×ª×•×¨ ×‘×¢×™×˜×” - ×¨×§ ×× ×× ×™ ××“××™×Ÿ ×•×–×” ×œ× ×× ×™
                    const kickBtn = (isAdmin && k !== myKey) ? `<i class="fas fa-ban kick-btn" onclick="kickUser('${k}')" title="×”×¢×£ ××©×ª××©"></i>` : "";
                    
                    list.innerHTML += `
                        <div class="user-row">
                            <span><i class="fas fa-user"></i> ${u.name}</span>
                            ${kickBtn}
                        </div>`;
                });
            });

            // ×”××–× ×” ×œ×‘×¢×™×˜×•×ª (Kick Listener)
            db.ref(`rooms/${code}/kicked`).on('child_added', snap => {
                if (snap.val() === myKey) {
                    alert("× ×–×¨×§×ª ××”×—×“×¨ ×¢\"×™ ×”×× ×”×œ! ğŸ‘¢");
                    location.reload();
                }
            });

            // ×”××–× ×” ×œ×”×¦×‘×¢×•×ª ×“×™×œ×•×’
            db.ref(`rooms/${code}/skip_votes`).on('value', snap => {
                const votes = snap.numChildren();
                updateVoteBtnText(votes);
                // ×× ×¨×•×‘ ×”×× ×©×™× ×”×¦×‘×™×¢×• (××¢×œ 50%)
                if (isAdmin && votes > 0 && votes >= (totalUsers / 2)) {
                    // ×”×× ×”×œ ××§×‘×œ ×”×•×¨××” ×œ×”×¢×‘×™×¨ ×©×™×¨ (×œ×•×’×™×§×” ×‘×¡×™×¡×™×ª - ×›××Ÿ ×¨×§ ×××¤×¡)
                    db.ref(`rooms/${currentRoom}/current_song`).update({ status: 2 }); // Pause ×›×“×•×’××”
                    db.ref(`rooms/${currentRoom}/skip_votes`).remove(); // ××™×¤×•×¡ ×”×¦×‘×¢×•×ª
                }
            });

            // ×”××–× ×” ×œ×©×™×¨
            db.ref(`rooms/${currentRoom}/current_song`).on('value', (snapshot) => {
                const data = snapshot.val();
                if (!data) return;
                
                document.getElementById('npTitle').innerText = data.title;
                document.getElementById('npStatus').innerText = data.status === 1 ? "×× ×’×Ÿ â–¶" : "××•×©×”×” â¸";
                document.getElementById('npThumb').src = data.thumbnail || "https://via.placeholder.com/56";
                currentVideoId = data.videoId;

                if (player && player.loadVideoById && player.getVideoData().video_id !== data.videoId) {
                    isSyncing = true;
                    player.loadVideoById(data.videoId);
                    // ××™×¤×•×¡ ×”×¦×‘×¢×•×ª ×‘×©×™×¨ ×—×“×©
                    if(isAdmin) db.ref(`rooms/${currentRoom}/skip_votes`).remove();
                    setTimeout(() => isSyncing = false, 1500);
                }

                if (player && player.getPlayerState && !isSyncing) {
                    const diff = Math.abs(player.getCurrentTime() - (data.timestamp || 0));
                    if (data.status === 1 && (player.getPlayerState() !== 1 || diff > 2)) {
                        player.seekTo(data.timestamp || 0);
                        player.playVideo();
                    } else if (data.status === 2 && player.getPlayerState() !== 2) {
                        player.pauseVideo();
                    }
                }
            });

            // ×”××–× ×” ×œ×¦'××˜
            db.ref(`rooms/${currentRoom}/chat`).limitToLast(15).on('child_added', snap => {
                const msg = snap.val();
                const div = document.getElementById('chatMessages');
                div.innerHTML += `<div class="msg"><strong>${msg.user}</strong>${msg.text}</div>`;
                div.scrollTop = div.scrollHeight;
            });

            // ×”××–× ×” ×œ×¨×™××§×¦×™×•×ª
            db.ref(`rooms/${currentRoom}/reactions`).on('child_added', snap => {
                showFloatingEmoji(snap.val().emoji);
                snap.ref.remove();
            });

            // ×”×¤×¢×œ×ª ×¤×¨×•×’×¨×¡ ×‘×¨ ×—×™
            setInterval(updateProgressBar, 1000);
        }

        // --- ×œ×•×’×™×§×ª × ×™×”×•×œ (Admin) ---
        function kickUser(key) {
            if(!confirm("×œ×”×¢×™×£ ××ª ×”××©×ª××© ×”×–×”?")) return;
            // ×”×•×¡×¤×” ×œ×¨×©×™××ª ×”××’×•×¨×©×™× (×›×“×™ ×©×”××©×ª××© ×™×§×‘×œ ×”×•×“×¢×”)
            db.ref(`rooms/${currentRoom}/kicked`).push(key);
            // ××—×™×§×” ××¨×©×™××ª ×”××©×ª××©×™×
            db.ref(`rooms/${currentRoom}/users/${key}`).remove();
        }

        // --- ×”×¦×‘×¢×” ×œ×“×™×œ×•×’ ---
        function voteSkip() {
            const btn = document.getElementById('voteSkipBtn');
            btn.classList.add('skip-active');
            // ×¨×•×©× ××ª ×”×”×¦×‘×¢×” ×©×œ×™ ×‘×“××˜×” ×‘×™×™×¡
            db.ref(`rooms/${currentRoom}/skip_votes/${myKey}`).set(true);
        }

        function updateVoteBtnText(votes) {
            document.getElementById('voteSkipBtn').innerHTML = `<i class="fas fa-forward"></i> ×“×œ×’ (${votes}/${totalUsers})`;
        }

        // --- × ×’×Ÿ ×•×¤×¨×•×’×¨×¡ ×‘×¨ ---
        function loadYoutubePlayer() {
            if (typeof YT !== 'undefined' && YT.Player) onYouTubeIframeAPIReady();
            else {
                var tag = document.createElement('script');
                tag.src = "https://www.youtube.com/iframe_api";
                var firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            }
        }

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%', width: '100%', videoId: '', 
                host: 'https://www.youtube-nocookie.com',
                playerVars: { 'autoplay': 1, 'controls': 0, 'rel': 0, 'modestbranding': 1, 'disablekb': 1 }, // ×©×œ×™×˜×” ×¨×§ ×“×¨×š ×”×××©×§ ×©×œ× ×•
                events: { 'onStateChange': onPlayerStateChange }
            });
        }

        function onPlayerStateChange(event) {
            if (isSyncing || !currentRoom) return;
            if (event.data === 1 || event.data === 2) {
                db.ref(`rooms/${currentRoom}/current_song`).update({
                    status: event.data,
                    timestamp: player.getCurrentTime()
                });
            }
        }

        function updateProgressBar() {
            if (player && player.getCurrentTime) {
                const current = player.getCurrentTime();
                const total = player.getDuration();
                if (total > 0) {
                    const percent = (current / total) * 100;
                    document.getElementById('progressBar').style.width = percent + "%";
                    document.getElementById('currentTime').innerText = formatTime(current);
                    document.getElementById('durationTime').innerText = formatTime(total);
                }
            }
        }

        function formatTime(s) {
            const min = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${min}:${sec < 10 ? '0'+sec : sec}`;
        }

        // --- ×—×™×¤×•×© ×•×ª×•×¦××•×ª ---
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') loadResults(e.target.value);
        });

        async function loadResults(query) {
            const grid = document.getElementById('resultsGrid');
            grid.innerHTML = '<p>×˜×•×¢×Ÿ...</p>';
            const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=12&q=${encodeURIComponent(query)}&key=${YOUTUBE_API_KEY}`;
            const res = await fetch(url);
            const data = await res.json();
            grid.innerHTML = "";
            
            data.items.forEach(item => {
                const div = document.createElement('div');
                div.style.cursor = "pointer";
                div.onclick = () => playVideo(item.id.videoId, item.snippet.title, item.snippet.thumbnails.medium.url);
                div.innerHTML = `
                    <img src="${item.snippet.thumbnails.medium.url}" style="width:100%; border-radius:8px;">
                    <div style="font-size:12px; margin-top:5px;">${item.snippet.title}</div>
                `;
                grid.appendChild(div);
            });
        }

        function playVideo(id, title, thumb) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            db.ref(`rooms/${currentRoom}/current_song`).set({
                videoId: id, title: title, thumbnail: thumb, status: 1, timestamp: 0
            });
        }

        // --- ×¤×•× ×§×¦×™×•×ª × ×•×¡×¤×•×ª ---
        function sendMessage() {
            const txt = document.getElementById('chatInput').value;
            if(txt) {
                db.ref(`rooms/${currentRoom}/chat`).push({ user: myName, text: txt });
                document.getElementById('chatInput').value = "";
            }
        }

        function sendReaction(emoji) {
            db.ref(`rooms/${currentRoom}/reactions`).push({ emoji: emoji });
        }

        function showFloatingEmoji(emoji) {
            const el = document.createElement('div');
            el.style.position = 'fixed';
            el.style.left = Math.random() * 80 + 10 + '%'; // ××™×§×•× ×¨× ×“×•××œ×™ ×œ×¨×•×—×‘
            el.style.bottom = '100px';
            el.style.fontSize = '40px';
            el.style.animation = 'floatUp 2s ease-out forwards';
            el.innerText = emoji;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }

        async function downloadCurrent() {
            if(!currentVideoId) return alert("××™×Ÿ ×©×™×¨");
            window.open(`https://${RAPID_API_HOST}/dl?id=${currentVideoId}`, '_blank');
        }

        // ×¡×’× ×•×Ÿ ×× ×™××¦×™×” ×œ××™××•×’'×™
        const style = document.createElement('style');
        style.innerHTML = `@keyframes floatUp { 0% { opacity: 0; transform: translateY(0); } 20% { opacity: 1; } 100% { opacity: 0; transform: translateY(-200px); } }`;
        document.head.appendChild(style);

    </script>
</body>
</html>
